<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qui est-ce? - Jeu 2 Joueurs</title>
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .bg-main {
            background: #f5f5f0;
        }

        .dark-mode {
            background: linear-gradient(145deg, #0f172a 0%, #1e1b4b 100%) !important;
            min-height: 100vh;
        }
        .dark-mode .bg-white {
            background: rgba(30, 41, 59, 0.8) !important;
            backdrop-filter: blur(10px);
            color: #e2e8f0 !important;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        .dark-mode .bg-card {
            background-color: #1e293b !important;
        }
        .dark-mode .text-gray-800,
        .dark-mode .text-gray-700 {
            color: #f1f5f9 !important;
        }
        .dark-mode .text-gray-600,
        .dark-mode .text-gray-500 {
            color: #94a3b8 !important;
        }
        .dark-mode .text-gray-400 {
            color: #64748b !important;
        }
        .dark-mode .bg-gray-100,
        .dark-mode .bg-gray-50 {
            background-color: rgba(51, 65, 85, 0.5) !important;
        }
        .dark-mode .border-gray-200,
        .dark-mode .border-gray-300 {
            border-color: rgba(148, 163, 184, 0.2) !important;
        }
        .dark-mode input {
            background: rgba(15, 23, 42, 0.6) !important;
            border-color: rgba(148, 163, 184, 0.2) !important;
            color: #f1f5f9 !important;
        }
        .dark-mode input::placeholder {
            color: #64748b !important;
        }
        .dark-mode input:focus {
            border-color: rgba(56, 189, 248, 0.5) !important;
            box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.1) !important;
        }

        /* Dark mode player colors */
        .dark-mode .text-sky-700 {
            color: #38bdf8 !important;
        }
        .dark-mode .text-amber-700 {
            color: #fbbf24 !important;
        }
        .dark-mode .bg-sky-50,
        .dark-mode .bg-sky-100 {
            background: rgba(56, 189, 248, 0.15) !important;
        }
        .dark-mode .bg-amber-50,
        .dark-mode .bg-amber-100 {
            background: rgba(251, 191, 36, 0.15) !important;
        }
        .dark-mode .border-sky-200 {
            border-color: rgba(56, 189, 248, 0.3) !important;
        }
        .dark-mode .border-amber-200 {
            border-color: rgba(251, 191, 36, 0.3) !important;
        }
        .dark-mode .text-sky-800 {
            color: #7dd3fc !important;
        }
        .dark-mode .text-amber-800 {
            color: #fcd34d !important;
        }
        .dark-mode .ring-sky-500 {
            --tw-ring-color: rgba(56, 189, 248, 0.5) !important;
        }
        .dark-mode .ring-amber-500 {
            --tw-ring-color: rgba(251, 191, 36, 0.5) !important;
        }

        .card-shadow {
            box-shadow: 0 1px 3px rgba(0,0,0,0.08), 0 4px 12px rgba(0,0,0,0.05);
        }
        .dark-mode .card-shadow {
            box-shadow: 0 4px 20px rgba(0,0,0,0.3), 0 0 40px rgba(99, 102, 241, 0.05);
        }

        .btn-primary {
            background: #18181b;
            transition: all 0.2s ease;
        }
        .btn-primary:hover {
            background: #27272a;
            transform: translateY(-1px);
        }

        .dark-mode .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
            color: #ffffff !important;
            border: none !important;
        }
        .dark-mode .btn-primary:hover {
            background: linear-gradient(135deg, #818cf8 0%, #a78bfa 100%) !important;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4) !important;
        }

        /* Dark mode button variations */
        .dark-mode .bg-gray-900 {
            background: rgba(99, 102, 241, 0.8) !important;
        }
        .dark-mode .bg-sky-600 {
            background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%) !important;
        }
        .dark-mode .bg-amber-600 {
            background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%) !important;
        }

        .player1-accent { color: #0369a1; }
        .player1-bg { background: #e0f2fe; }
        .player1-border { border-color: #0369a1; }

        .player2-accent { color: #b45309; }
        .player2-bg { background: #fef3c7; }
        .player2-border { border-color: #b45309; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icône Users
        const Users = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
        );

        // Icône RotateCcw
        const RotateCcw = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
            </svg>
        );

        // Icône Eye
        const Eye = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
        );

        // Icône Trophy
        const Trophy = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
            </svg>
        );

        // Icône Moon
        const Moon = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            </svg>
        );

        // Icône Sun
        const Sun = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
        );

        // Icône Undo
        const Undo = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
            </svg>
        );

        // Icône Clock
        const Clock = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        // Icône EyeOff
        const EyeOff = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
            </svg>
        );

        // Avatar component
        const Avatar = ({ id, size = 40 }) => {
            return (
                <img
                    src={`avatar${id}.png`}
                    alt={`Avatar ${id}`}
                    width={size}
                    height={size}
                    style={{ borderRadius: '50%', objectFit: 'cover' }}
                />
            );
        };

        // Fonctions pour les sons
        const playSound = (frequency, duration) => {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch (e) {
                console.log('Audio not supported');
            }
        };

        const playEliminateSound = () => playSound(300, 0.1);
        const playVictorySound = () => {
            playSound(523, 0.15);
            setTimeout(() => playSound(659, 0.15), 150);
            setTimeout(() => playSound(784, 0.3), 300);
        };
        const playTimerSound = () => playSound(800, 0.2);

        const vibrate = (pattern) => {
            if (navigator.vibrate) {
                navigator.vibrate(pattern);
            }
        };

        const GuessWhoGame = () => {
            const [phase, setPhase] = useState('config');
            const [totalRounds, setTotalRounds] = useState(3);
            const [currentRound, setCurrentRound] = useState(1);
            const [player1Score, setPlayer1Score] = useState(0);
            const [player2Score, setPlayer2Score] = useState(0);
            const [player1Name, setPlayer1Name] = useState('');
            const [player2Name, setPlayer2Name] = useState('');
            const [player1Avatar, setPlayer1Avatar] = useState(1);
            const [player2Avatar, setPlayer2Avatar] = useState(2);
            const [darkMode, setDarkMode] = useState(false);
            const [timerEnabled, setTimerEnabled] = useState(false);
            const [timeLeft, setTimeLeft] = useState(120);
            const [lastElimination, setLastElimination] = useState(null);
            
            const [currentPlayer, setCurrentPlayer] = useState(1);
            const [nameInput, setNameInput] = useState('');
            const [allNames, setAllNames] = useState([]);
            const [player1Secret, setPlayer1Secret] = useState('');
            const [player2Secret, setPlayer2Secret] = useState('');
            const [error, setError] = useState('');
            const [eliminatedByP1, setEliminatedByP1] = useState([]);
            const [eliminatedByP2, setEliminatedByP2] = useState([]);
            const [gameCurrentPlayer, setGameCurrentPlayer] = useState(1);
            const [roundWinner, setRoundWinner] = useState(null);
            const [secretRevealed, setSecretRevealed] = useState(false);

            const timerRef = useRef(null);

            // Timer
            useEffect(() => {
                if (phase === 'game' && timerEnabled && timeLeft > 0) {
                    timerRef.current = setInterval(() => {
                        setTimeLeft(prev => {
                            if (prev <= 1) {
                                playTimerSound();
                                vibrate(200);
                                checkWinner();
                                return 120;
                            }
                            if (prev === 11) {
                                playTimerSound();
                            }
                            return prev - 1;
                        });
                    }, 1000);
                    return () => clearInterval(timerRef.current);
                }
            }, [phase, timerEnabled, timeLeft, gameCurrentPlayer]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            const startGame = () => {
                if (totalRounds < 1) {
                    setError('Choisissez au moins 1 partie');
                    return;
                }
                if (!player1Name.trim() || !player2Name.trim()) {
                    setError('Veuillez entrer les noms des deux joueurs');
                    return;
                }
                setPhase('setup');
                setError('');
            };

            const handleAddName = () => {
                const trimmedName = nameInput.trim();
                
                if (!trimmedName) {
                    setError('Veuillez entrer un prénom');
                    return;
                }

                if (allNames.includes(trimmedName.toLowerCase())) {
                    setError('Ce prénom a déjà été ajouté!');
                    setNameInput('');
                    return;
                }

                const newNames = [...allNames, trimmedName.toLowerCase()];
                setAllNames(newNames);
                setNameInput('');
                setError('');

                if (newNames.length < 20) {
                    setCurrentPlayer(currentPlayer === 1 ? 2 : 1);
                }

                if (newNames.length === 20) {
                    const shuffled = [...newNames].sort(() => Math.random() - 0.5);
                    setPlayer1Secret(shuffled[0]);
                    setPlayer2Secret(shuffled[1]);
                    setPhase('assignSecret');
                    setCurrentPlayer(1);
                }
            };

            const revealAndStartGame = (player) => {
                if (player === 1) {
                    setCurrentPlayer(2);
                    setSecretRevealed(false);
                } else {
                    setPhase('game');
                    setGameCurrentPlayer(1);
                    setSecretRevealed(false);
                }
            };

            const toggleEliminate = (name) => {
                playEliminateSound();
                vibrate(50);
                
                if (gameCurrentPlayer === 1) {
                    if (eliminatedByP1.includes(name)) {
                        setEliminatedByP1(eliminatedByP1.filter(n => n !== name));
                        setLastElimination(null);
                    } else {
                        setLastElimination({ player: 1, name });
                        setEliminatedByP1([...eliminatedByP1, name]);
                    }
                } else {
                    if (eliminatedByP2.includes(name)) {
                        setEliminatedByP2(eliminatedByP2.filter(n => n !== name));
                        setLastElimination(null);
                    } else {
                        setLastElimination({ player: 2, name });
                        setEliminatedByP2([...eliminatedByP2, name]);
                    }
                }
            };

            const undoLastElimination = () => {
                if (!lastElimination) return;
                
                playSound(400, 0.1);
                if (lastElimination.player === 1) {
                    setEliminatedByP1(eliminatedByP1.filter(n => n !== lastElimination.name));
                } else {
                    setEliminatedByP2(eliminatedByP2.filter(n => n !== lastElimination.name));
                }
                setLastElimination(null);
            };

            const checkWinner = () => {
                const p1Remaining = allNames.filter(name => !eliminatedByP1.includes(name));
                const p1Won = p1Remaining.length === 1 && p1Remaining[0] === player2Secret;
                const p1Wrong = p1Remaining.length === 1 && p1Remaining[0] !== player2Secret;

                const p2Remaining = allNames.filter(name => !eliminatedByP2.includes(name));
                const p2Won = p2Remaining.length === 1 && p2Remaining[0] === player1Secret;
                const p2Wrong = p2Remaining.length === 1 && p2Remaining[0] !== player1Secret;

                let winner = null;
                const resultMessage = `${player1Name || 'Joueur 1'} devait deviner "${player2Secret}" et ${player2Name || 'Joueur 2'} devait deviner "${player1Secret}"`;
                
                if (p1Wrong && p2Remaining.length > 1) {
                    setPlayer2Score(player2Score + 1);
                    winner = 2;
                    setError(resultMessage);
                } else if (p2Wrong && p1Remaining.length > 1) {
                    setPlayer1Score(player1Score + 1);
                    winner = 1;
                    setError(resultMessage);
                } else if (p1Wrong && p2Wrong) {
                    winner = 'draw';
                    setError(resultMessage);
                } else if (p1Won && p2Won) {
                    winner = 'draw';
                    setError(resultMessage);
                } else if (p1Won && p2Remaining.length > 1) {
                    setPlayer1Score(player1Score + 1);
                    winner = 1;
                    setError(resultMessage);
                } else if (p2Won && p1Remaining.length > 1) {
                    setPlayer2Score(player2Score + 1);
                    winner = 2;
                    setError(resultMessage);
                } else if (p1Won) {
                    setPlayer1Score(player1Score + 1);
                    winner = 1;
                    setError(resultMessage);
                } else if (p2Won) {
                    setPlayer2Score(player2Score + 1);
                    winner = 2;
                    setError(resultMessage);
                }

                if (winner) {
                    playVictorySound();
                    vibrate([200, 100, 200]);
                    setRoundWinner(winner);
                    setPhase('roundEnd');
                    setTimeLeft(120);
                    clearInterval(timerRef.current);
                } else {
                    setGameCurrentPlayer(gameCurrentPlayer === 1 ? 2 : 1);
                    setTimeLeft(120);
                    setLastElimination(null);
                }
            };

            const nextRound = () => {
                if (currentRound < totalRounds) {
                    setCurrentRound(currentRound + 1);
                    
                    // Réutiliser les mêmes prénoms
                    const shuffled = [...allNames].sort(() => Math.random() - 0.5);
                    setPlayer1Secret(shuffled[0]);
                    setPlayer2Secret(shuffled[1]);
                    setPhase('assignSecret');
                    setCurrentPlayer(1);
                    
                    setEliminatedByP1([]);
                    setEliminatedByP2([]);
                    setGameCurrentPlayer(1);
                    setRoundWinner(null);
                    setError('');
                    setTimeLeft(120);
                    setLastElimination(null);
                } else {
                    setPhase('gameEnd');
                    playVictorySound();
                    vibrate([300, 100, 300, 100, 300]);
                }
            };

            const reset = () => {
                setPhase('config');
                setTotalRounds(3);
                setCurrentRound(1);
                setPlayer1Score(0);
                setPlayer2Score(0);
                setPlayer1Name('');
                setPlayer2Name('');
                setPlayer1Avatar(1);
                setPlayer2Avatar(2);
                setCurrentPlayer(1);
                setNameInput('');
                setAllNames([]);
                setPlayer1Secret('');
                setPlayer2Secret('');
                setError('');
                setEliminatedByP1([]);
                setEliminatedByP2([]);
                setGameCurrentPlayer(1);
                setRoundWinner(null);
                setTimeLeft(120);
                setLastElimination(null);
                clearInterval(timerRef.current);
            };

            return (
                <div className={`min-h-screen p-4 md:p-8 ${darkMode ? 'dark-mode' : 'bg-main'}`}>
                    <div className="max-w-2xl mx-auto">
                        
                        {/* Dark mode toggle */}
                        <button
                            onClick={() => setDarkMode(!darkMode)}
                            className={`fixed top-4 right-4 p-2.5 rounded-lg transition-all z-50 ${
                                darkMode
                                ? 'bg-slate-800/80 backdrop-blur border border-slate-700 hover:bg-slate-700/80'
                                : 'bg-white card-shadow hover:bg-gray-50'
                            }`}
                        >
                            {darkMode ? <Sun className="w-5 h-5 text-amber-400" /> : <Moon className="w-5 h-5 text-gray-400" />}
                        </button>
                        
                        {phase === 'config' && (
                            <div className="bg-white rounded-xl card-shadow p-6 md:p-8">
                                <div className="text-center mb-8">
                                    <Users className="w-12 h-12 mx-auto mb-4 text-gray-700" />
                                    <h1 className="text-3xl md:text-4xl font-semibold text-gray-800 mb-1">Qui est-ce?</h1>
                                    <p className="text-gray-500 text-sm">Jeu à 2 joueurs</p>
                                </div>

                                <div className="space-y-5">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-600 mb-2">
                                            Joueur 1
                                        </label>
                                        <div className="flex gap-3 items-center">
                                            <div className="flex-shrink-0">
                                                <Avatar id={player1Avatar} size={48} />
                                            </div>
                                            <input
                                                type="text"
                                                value={player1Name}
                                                onChange={(e) => setPlayer1Name(e.target.value)}
                                                className="flex-1 px-4 py-3 border border-gray-200 rounded-lg focus:border-sky-600 focus:ring-2 focus:ring-sky-100 focus:outline-none text-lg text-gray-800 bg-white transition-all"
                                                placeholder="Entrez un nom"
                                            />
                                        </div>
                                        <div className="flex gap-2 mt-2 justify-center">
                                            {[1, 2, 3, 4, 5, 6, 7, 8].map(id => (
                                                <button
                                                    key={id}
                                                    onClick={() => setPlayer1Avatar(id)}
                                                    className={`p-1 rounded-lg transition-all ${
                                                        player1Avatar === id
                                                        ? 'ring-2 ring-sky-500 bg-sky-50'
                                                        : 'hover:bg-gray-100'
                                                    }`}
                                                >
                                                    <Avatar id={id} size={32} />
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-600 mb-2">
                                            Joueur 2
                                        </label>
                                        <div className="flex gap-3 items-center">
                                            <div className="flex-shrink-0">
                                                <Avatar id={player2Avatar} size={48} />
                                            </div>
                                            <input
                                                type="text"
                                                value={player2Name}
                                                onChange={(e) => setPlayer2Name(e.target.value)}
                                                className="flex-1 px-4 py-3 border border-gray-200 rounded-lg focus:border-amber-600 focus:ring-2 focus:ring-amber-100 focus:outline-none text-lg text-gray-800 bg-white transition-all"
                                                placeholder="Entrez un nom"
                                            />
                                        </div>
                                        <div className="flex gap-2 mt-2 justify-center">
                                            {[1, 2, 3, 4, 5, 6, 7, 8].map(id => (
                                                <button
                                                    key={id}
                                                    onClick={() => setPlayer2Avatar(id)}
                                                    className={`p-1 rounded-lg transition-all ${
                                                        player2Avatar === id
                                                        ? 'ring-2 ring-amber-500 bg-amber-50'
                                                        : 'hover:bg-gray-100'
                                                    }`}
                                                >
                                                    <Avatar id={id} size={32} />
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-600 mb-3">
                                            Nombre de manches
                                        </label>
                                        <div className="flex gap-2 justify-center flex-wrap">
                                            {[1, 2, 3, 5, 7, 10].map(num => (
                                                <button
                                                    key={num}
                                                    onClick={() => setTotalRounds(num)}
                                                    className={`px-5 py-3 rounded-lg font-medium text-lg transition-all ${
                                                        totalRounds === num
                                                        ? 'bg-gray-900 text-white'
                                                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                                    }`}
                                                >
                                                    {num}
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                        <div className="flex items-center gap-3">
                                            <Clock className="w-5 h-5 text-gray-500" />
                                            <span className="text-sm text-gray-600">Timer (2 min/tour)</span>
                                        </div>
                                        <button
                                            onClick={() => setTimerEnabled(!timerEnabled)}
                                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${
                                                timerEnabled
                                                ? 'bg-gray-900 text-white'
                                                : 'bg-gray-200 text-gray-500'
                                            }`}
                                        >
                                            {timerEnabled ? 'Actif' : 'Inactif'}
                                        </button>
                                    </div>

                                    {error && (
                                        <div className="bg-red-50 text-red-600 text-sm p-3 rounded-lg">
                                            {error}
                                        </div>
                                    )}

                                    <button
                                        onClick={startGame}
                                        className="w-full btn-primary text-white py-4 rounded-lg font-medium text-lg"
                                    >
                                        Commencer la partie
                                    </button>
                                </div>
                            </div>
                        )}

                        {phase !== 'config' && phase !== 'gameEnd' && (
                            <div className="bg-white rounded-lg card-shadow p-4 mb-4">
                                <div className="flex justify-between items-center">
                                    <div className="text-center flex-1 flex flex-col items-center">
                                        <Avatar id={player1Avatar} size={36} />
                                        <p className="text-xs text-gray-500 mt-1">{player1Name || 'Joueur 1'}</p>
                                        <p className="text-xl font-semibold text-sky-700">{player1Score}</p>
                                    </div>
                                    <div className="text-center flex-1">
                                        <p className="text-sm font-medium text-gray-400">{currentRound}/{totalRounds}</p>
                                    </div>
                                    <div className="text-center flex-1 flex flex-col items-center">
                                        <Avatar id={player2Avatar} size={36} />
                                        <p className="text-xs text-gray-500 mt-1">{player2Name || 'Joueur 2'}</p>
                                        <p className="text-xl font-semibold text-amber-700">{player2Score}</p>
                                    </div>
                                </div>
                            </div>
                        )}
                        
                        {phase === 'setup' && (
                            <div className="bg-white rounded-xl card-shadow p-6 md:p-8">
                                <div className="text-center mb-6">
                                    <h2 className="text-xl font-semibold text-gray-800 mb-1">Ajoutez 20 prénoms</h2>
                                    <p className="text-gray-500 text-sm">Des personnes que vous connaissez tous les deux</p>
                                </div>

                                <div className="mb-6">
                                    <div className="flex justify-between items-center mb-3">
                                        <span className="text-sm text-gray-500">
                                            {allNames.length}/20
                                        </span>
                                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${
                                            currentPlayer === 1 ? 'bg-sky-100 text-sky-700' : 'bg-amber-100 text-amber-700'
                                        }`}>
                                            {currentPlayer === 1 ? player1Name || 'Joueur 1' : player2Name || 'Joueur 2'}
                                        </span>
                                    </div>

                                    <div className="w-full bg-gray-100 rounded-full h-1.5 mb-6">
                                        <div
                                            className="bg-gray-800 h-1.5 rounded-full transition-all duration-300"
                                            style={{ width: `${(allNames.length / 20) * 100}%` }}
                                        />
                                    </div>
                                </div>

                                <div className="space-y-4">
                                    <div>
                                        <input
                                            type="text"
                                            value={nameInput}
                                            onChange={(e) => setNameInput(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && handleAddName()}
                                            className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:border-gray-400 focus:ring-2 focus:ring-gray-100 focus:outline-none text-lg transition-all"
                                            placeholder="Entrez un prénom..."
                                            autoFocus
                                        />
                                    </div>

                                    {error && (
                                        <div className="bg-red-50 text-red-600 text-sm p-3 rounded-lg">
                                            {error}
                                        </div>
                                    )}

                                    <button
                                        onClick={handleAddName}
                                        className="w-full btn-primary text-white py-3 rounded-lg font-medium"
                                    >
                                        Ajouter
                                    </button>
                                </div>

                                {allNames.length > 0 && (
                                    <div className="mt-6">
                                        <div className="flex flex-wrap gap-2 max-h-40 overflow-y-auto">
                                            {allNames.map((name, idx) => (
                                                <span key={idx} className="bg-gray-100 px-3 py-1.5 rounded-full capitalize text-sm text-gray-600">
                                                    {name}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {phase === 'assignSecret' && (
                            <div className="bg-white rounded-xl card-shadow p-6 md:p-8">
                                <div className="text-center mb-6">
                                    <Eye className="w-10 h-10 mx-auto mb-3 text-gray-600" />
                                    <h1 className="text-xl font-semibold text-gray-800 mb-1">Personnage secret</h1>
                                    <p className="text-gray-500 text-sm">Passez le téléphone au joueur concerné</p>
                                </div>

                                {currentPlayer === 1 && (
                                    <div className="space-y-6">
                                        <div className="bg-sky-50 border-2 border-sky-200 rounded-xl p-6 text-center">
                                            <h2 className="text-lg font-semibold text-sky-700 mb-3">{player1Name || 'Joueur 1'}</h2>
                                            <p className="text-gray-600 text-sm mb-4">Ton personnage (que {player2Name || 'l\'autre'} doit deviner)</p>

                                            {!secretRevealed ? (
                                                <div>
                                                    <div className="text-4xl font-bold text-sky-300 mb-6 tracking-widest">
                                                        * * *
                                                    </div>
                                                    <button
                                                        onClick={() => setSecretRevealed(true)}
                                                        className="px-6 py-3 bg-sky-600 text-white rounded-lg font-medium hover:bg-sky-700 transition-all inline-flex items-center gap-2"
                                                    >
                                                        <Eye className="w-4 h-4" />
                                                        Révéler
                                                    </button>
                                                </div>
                                            ) : (
                                                <div>
                                                    <p className="text-4xl font-bold text-sky-700 capitalize mb-4">{player1Secret}</p>
                                                    <p className="text-xs text-gray-500 mb-6">Mémorise-le bien</p>
                                                    <button
                                                        onClick={() => revealAndStartGame(1)}
                                                        className="px-6 py-3 bg-sky-600 text-white rounded-lg font-medium hover:bg-sky-700 transition-all"
                                                    >
                                                        Continuer
                                                    </button>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}

                                {currentPlayer === 2 && (
                                    <div className="space-y-6 transform rotate-180">
                                        <div className="bg-amber-50 border-2 border-amber-200 rounded-xl p-6 text-center">
                                            <h2 className="text-lg font-semibold text-amber-700 mb-3">{player2Name || 'Joueur 2'}</h2>
                                            <p className="text-gray-600 text-sm mb-4">Ton personnage (que {player1Name || 'l\'autre'} doit deviner)</p>

                                            {!secretRevealed ? (
                                                <div>
                                                    <div className="text-4xl font-bold text-amber-300 mb-6 tracking-widest">
                                                        * * *
                                                    </div>
                                                    <button
                                                        onClick={() => setSecretRevealed(true)}
                                                        className="px-6 py-3 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 transition-all inline-flex items-center gap-2"
                                                    >
                                                        <Eye className="w-4 h-4" />
                                                        Révéler
                                                    </button>
                                                </div>
                                            ) : (
                                                <div>
                                                    <p className="text-4xl font-bold text-amber-700 capitalize mb-4">{player2Secret}</p>
                                                    <p className="text-xs text-gray-500 mb-6">Mémorise-le bien</p>
                                                    <button
                                                        onClick={() => revealAndStartGame(2)}
                                                        className="px-6 py-3 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 transition-all"
                                                    >
                                                        Commencer
                                                    </button>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {phase === 'game' && (
                            <div className={`bg-white rounded-xl card-shadow p-5 md:p-6 transition-all duration-500 ${
                                gameCurrentPlayer === 2 ? 'transform rotate-180' : ''
                            }`}>
                                <div className="text-center mb-5">
                                    <div className="flex justify-between items-center mb-3">
                                        <button
                                            onClick={reset}
                                            className="inline-flex items-center gap-1.5 px-3 py-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors text-sm"
                                        >
                                            <RotateCcw className="w-4 h-4" />
                                        </button>
                                        <h2 className={`text-lg font-semibold ${
                                            gameCurrentPlayer === 1 ? 'text-sky-700' : 'text-amber-700'
                                        }`}>
                                            {gameCurrentPlayer === 1 ? (player1Name || 'Joueur 1') : (player2Name || 'Joueur 2')}
                                        </h2>
                                        <div className="w-10"></div>
                                    </div>

                                    {timerEnabled && (
                                        <div className={`text-2xl font-mono font-medium mb-3 ${timeLeft <= 10 ? 'text-red-500' : 'text-gray-600'}`}>
                                            {formatTime(timeLeft)}
                                        </div>
                                    )}

                                    {lastElimination && lastElimination.player === gameCurrentPlayer && (
                                        <button
                                            onClick={undoLastElimination}
                                            className="inline-flex items-center gap-1.5 px-3 py-1.5 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors text-sm mb-3"
                                        >
                                            <Undo className="w-3.5 h-3.5" />
                                            Annuler
                                        </button>
                                    )}
                                </div>

                                <div className="grid grid-cols-4 gap-2 mb-5">
                                    {allNames.map((name, idx) => {
                                        const isEliminated = gameCurrentPlayer === 1
                                            ? eliminatedByP1.includes(name)
                                            : eliminatedByP2.includes(name);

                                        return (
                                            <button
                                                key={idx}
                                                onClick={() => toggleEliminate(name)}
                                                className={`px-2 py-2.5 rounded-lg text-sm font-medium capitalize transition-all ${
                                                    isEliminated
                                                        ? 'bg-gray-100 text-gray-400 line-through'
                                                        : gameCurrentPlayer === 1
                                                        ? 'bg-sky-50 text-sky-800 hover:bg-sky-100 border border-sky-200'
                                                        : 'bg-amber-50 text-amber-800 hover:bg-amber-100 border border-amber-200'
                                                }`}
                                            >
                                                {name}
                                            </button>
                                        );
                                    })}
                                </div>

                                <div className="flex justify-center gap-8 text-center mb-5 py-3 bg-gray-50 rounded-lg">
                                    <div>
                                        <p className="text-xl font-semibold text-gray-800">
                                            {gameCurrentPlayer === 1
                                                ? allNames.length - eliminatedByP1.length
                                                : allNames.length - eliminatedByP2.length
                                            }
                                        </p>
                                        <p className="text-xs text-gray-500">Restants</p>
                                    </div>
                                    <div>
                                        <p className="text-xl font-semibold text-gray-400">
                                            {gameCurrentPlayer === 1 ? eliminatedByP1.length : eliminatedByP2.length}
                                        </p>
                                        <p className="text-xs text-gray-500">Éliminés</p>
                                    </div>
                                </div>

                                <button
                                    onClick={checkWinner}
                                    className={`w-full py-3 rounded-lg font-medium text-white transition-all ${
                                        gameCurrentPlayer === 1
                                            ? 'bg-sky-600 hover:bg-sky-700'
                                            : 'bg-amber-600 hover:bg-amber-700'
                                    }`}
                                >
                                    Terminer mon tour
                                </button>
                            </div>
                        )}

                        {phase === 'roundEnd' && (
                            <div className="bg-white rounded-xl card-shadow p-6 md:p-8">
                                <div className="text-center mb-6">
                                    <Trophy className="w-12 h-12 mx-auto mb-3 text-amber-500" />
                                    <h1 className="text-xl font-semibold text-gray-800 mb-3">Manche {currentRound} terminée</h1>

                                    {error && (
                                        <div className="bg-gray-50 text-gray-600 text-sm p-3 rounded-lg mb-4">
                                            {error}
                                        </div>
                                    )}

                                    {roundWinner === 'draw' && !error && (
                                        <p className="text-lg text-gray-500">Égalité</p>
                                    )}
                                    {roundWinner === 1 && (
                                        <p className="text-lg text-sky-700 font-medium">{player1Name || 'Joueur 1'} gagne cette manche</p>
                                    )}
                                    {roundWinner === 2 && (
                                        <p className="text-lg text-amber-700 font-medium">{player2Name || 'Joueur 2'} gagne cette manche</p>
                                    )}
                                </div>

                                <div className="bg-gray-50 rounded-lg p-5 mb-6">
                                    <div className="flex justify-around">
                                        <div className="text-center flex flex-col items-center">
                                            <Avatar id={player1Avatar} size={40} />
                                            <p className="text-xs text-gray-500 mt-1">{player1Name || 'Joueur 1'}</p>
                                            <p className="text-4xl font-semibold text-sky-700">{player1Score}</p>
                                        </div>
                                        <div className="text-center flex flex-col items-center">
                                            <Avatar id={player2Avatar} size={40} />
                                            <p className="text-xs text-gray-500 mt-1">{player2Name || 'Joueur 2'}</p>
                                            <p className="text-4xl font-semibold text-amber-700">{player2Score}</p>
                                        </div>
                                    </div>
                                </div>

                                <button
                                    onClick={nextRound}
                                    className="w-full btn-primary text-white py-3 rounded-lg font-medium"
                                >
                                    {currentRound < totalRounds ? 'Manche suivante' : 'Voir les résultats'}
                                </button>
                            </div>
                        )}

                        {phase === 'gameEnd' && (
                            <div className="bg-white rounded-xl card-shadow p-6 md:p-8">
                                <div className="text-center mb-6">
                                    {player1Score > player2Score && (
                                        <div className="flex flex-col items-center">
                                            <Avatar id={player1Avatar} size={64} />
                                            <p className="text-xl font-semibold text-sky-700 mt-2">{player1Name || 'Joueur 1'} gagne!</p>
                                        </div>
                                    )}
                                    {player2Score > player1Score && (
                                        <div className="flex flex-col items-center">
                                            <Avatar id={player2Avatar} size={64} />
                                            <p className="text-xl font-semibold text-amber-700 mt-2">{player2Name || 'Joueur 2'} gagne!</p>
                                        </div>
                                    )}
                                    {player1Score === player2Score && (
                                        <div className="flex flex-col items-center">
                                            <div className="flex gap-2">
                                                <Avatar id={player1Avatar} size={48} />
                                                <Avatar id={player2Avatar} size={48} />
                                            </div>
                                            <p className="text-xl font-semibold text-gray-700 mt-2">Égalité</p>
                                        </div>
                                    )}
                                </div>

                                <div className="bg-gray-50 rounded-lg p-6 mb-6">
                                    <div className="flex justify-around">
                                        <div className="text-center flex flex-col items-center">
                                            <Avatar id={player1Avatar} size={44} />
                                            <p className="text-xs text-gray-500 mt-1">{player1Name || 'Joueur 1'}</p>
                                            <p className="text-5xl font-semibold text-sky-700">{player1Score}</p>
                                        </div>
                                        <div className="text-center flex flex-col items-center">
                                            <Avatar id={player2Avatar} size={44} />
                                            <p className="text-xs text-gray-500 mt-1">{player2Name || 'Joueur 2'}</p>
                                            <p className="text-5xl font-semibold text-amber-700">{player2Score}</p>
                                        </div>
                                    </div>
                                </div>

                                <button
                                    onClick={reset}
                                    className="w-full btn-primary text-white py-3 rounded-lg font-medium"
                                >
                                    Nouvelle partie
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<GuessWhoGame />, document.getElementById('root'));
    </script>
</body>
</html>